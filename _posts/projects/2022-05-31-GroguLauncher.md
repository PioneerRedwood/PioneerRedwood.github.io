---
layout: post
title: "GroguLauncher"
date: 2022-05-31
category: projects
---

마지막 업데이트: 2022-05-31

## 기간
2021-12-16 ~ 2022-02-02

## 개발 목적

현대적인 UI, 한눈에 보이는 뉴스 피드, 소셜 기능, 매치메이킹, 게임 업데이트 등의 기능들이 한곳에 어우러져있는 것을 만들어보고 싶었습니다. 

마치 라이엇 클라이언트, 배틀넷, 에픽 게임즈처럼 제가 만든 게임을 런칭할 수 있는 게이트웨이가 되는 것을 구상 중입니다. 

## 개발 기능

1. 게임 업데이트 기능: 게임을 다운로드하고 업데이트하고 삭제할 수 있는 기능.
2. 소셜 기능: 친구를 맺고 채팅하고 파티를 구성하는 기능. 파티를 구성하는 게임은 아직 만들지 않았습니다.
3. 뉴스 피드 기능: 최신 진행되는 사항이나 게임의 업데이트 피드를 보여주려고 합니다. 지금은 간단하게 웹 사이트를 연결해두었지만 뉴스 피드를 보여주는 것이 최종 목표입니다.
4. 매치메이킹: 1:1 대전, N:N 대전 같이 매칭이 필요한 기능입니다. 
5. 디자인: 세련되고 현대적인 UI로 구성해야 합니다. (디자인엔 자신 없는데 .. 과연 가능할까?)
6. 로비: 플레이어들이 게임을 시작하기 전에 모이는 장소입니다. 

## 개발 시도

아래는 어플리케이션을 만들기 위해 필요할 것이라고 생각되는 부분을 시도했던 흔적입니다. 

1. 크로미움 임베디드 프레임워크(CEF) 기반 윈도우 어플리케이션 제작 
    1. https://github.com/PioneerRedwood/cef-grogu (약 1개월)
    2. CEF 공식 문서에서 완성된 예제로 제공하는 cef-client를 분석하며 필요하다고 생각하는 부분을 추가/삭제를 거친 간단한 데스크탑 어플리케이션입니다. 이를 분석하며 나만의 프로젝트로 빌드하기 위해서는 CMake 빌드 시스템 생성기에 대해서 알아야 했습니다.
2. 화면을 구성하기 위한 Qt 프레임워크
    1. https://github.com/PioneerRedwood/QtExample (약 1주일)
    2. 임베디드 프로그래밍에서 화면을 구성하는데 사용되는 크로스 플랫폼 프레임워크 Qt(큐트라고 발음)는 C++을 사용하여 연산 및 실행 속도의 우수함을 기대할 수 있습니다. 
    3. 위의 CEF를 하나의 뷰 컴포넌트로 사용할 수 있도록 하는 오픈소스를 찾았는데 CMake에 대한 깊은 이해와 Qt의 빌드 파이프라인을 이해하는 과정에서 생산성의 한계를 느꼈습니다.
3. 번외) CMake 빌드 시스템 생성기를 이해하기 위한 boost asio CMake 예제 만들기
    1. https://github.com/PioneerRedwood/boost-cmake-build-example (약 1주일)
4. 타겟 환경에 맞는 프레임워크 재선정
    1. 타겟이 윈도우이므로 WPF(Windows Presentation Foundation)로 제작하는 것으로 방향을 바꿨습니다. 

[WPF을 사용하며 든 작은 생각](https://www.notion.so/WPF-0b972d76d66f4f6da4f1a602c1f458df?pvs=21)

## 추가 및 완료 기능

- [x]  로그인 구현하기
- [x]  구글 로그인 연동하기
- [x]  소셜 기능 구현하기 -친구 맺기 등
- [x]  패치 서버 구현하기
- [x]  게임 설치, 실행 구현하기 -게임은 그냥 유니티로 만든 게임 두개 올려놓는 것
- [x]  소셜 채팅 기능 구현하기 -Battle.net 같이
    
    [소셜 채팅 기능](https://www.notion.so/dd4386da345548c393f48e017dfce5a4?pvs=21)
    
- [x]  서드파티 라이센스 창 만들기 - 간단한 컨텍스트 메뉴로 구현(로고 누르면 종료 / 라이센스 창 열기)
- [x]  StarCraft 2의 채팅 로비 서버 만들기
- [ ]  CEF에 나만의 뉴스 피드 업데이트하기

### 빅 이슈

- [ ]  [ 대규모 리팩토링 ] MVVM 패턴을 따르기 위한 뷰-모델-뷰모델 따로 분리하기
- [x]  [ 대규모 리팩토링 ] C# Coding Conventions에 맞게 수정하기 - 이슈에서 지속 사항으로

[C# Coding Conventions](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions)

## 후기

위 개발 목적에서 설명했듯이, 제가 만든 게임을 업데이트 받고 플레이할 수 있는 관문이 되는 어플리케이션을 만들고 싶었습니다. 기간은 짧지만 개인적으로 지금까지 느꼈던 것들을 설명하고자 합니다.

1. 목표가 되는 모델은 블리자드의 배틀넷 클라이언트였습니다.  하지만 제가 만든 게임과 그들이 서비스하는 게임은 달랐고 모티브가 되는 것과의 괴리감에서 오는 혼동이 여러 번 찾아왔습니다. 그럴 때마다 라이엇 클라이언트를 참고하려고 했습니다. 비슷한 서비스를 이미 구현해놓은 모델들을 참고하는 것이 큰 도움이 됨을 알게 됐습니다.
2. 개발 목적에도 부합하고 빠른 속도로 개발 가능한 완벽한 프레임워크를 탐색하는 과정이 길었습니다. 
    1. WinForms로 하나하나 만들기를 시도했습니다. 하지만 UI부터 기능까지 구현하는데 한계를 느꼈습니다.
    2. 배틀넷 클라이언트는 CEF로 만들어져있다는 것을 찾아서 직접 CEF 레포지토리를 빌드했고 CefClient라는 잘 만들어진 예제를 따라 클론 코딩을 했습니다. 그 과정에서 CMake라는 것을 변경하면서 빌드를 생성해보는 과정을 거쳤습니다. 
    3. 순수 CEF는 크로스 플랫폼이었고 크로스 플랫폼까지는 과하다고 느껴져 CefSharp이라는 C#으로 래핑한 다른 라이브러리를 찾았습니다. 이를 적절하게 녹여서 만들어낼 만한 프레임워크는 WPF였습니다.
3. WPF를 사용하는 가장 큰 이유라고 말하는 MVVM 패턴을 준수하지 못한 아쉬움이 남았습니다. 모델-뷰-뷰모델을 각각 분리하여서 UI / 로직을 구분해 유지보수 비용을 절약하는 아름다운 디자인 패턴인데 이를 개발하는 끝자락에서야 보게 되었습니다. 만약 처음부터 프레임워크의 특징이나 사용 예에 대해 자세히 찾아봤다면 이러한 패턴을 일찍이 적용했을텐데라는 생각이 마지막에서야 느꼈습니다.
4. 2021년 하반기 접한 boost asio 네트워크 라이브러리를 통해 만들어놓은 서버/클라이언트 프레임워크를 사용하는 좋은 예시가 되어 개인적으로 만족스러웠습니다. 간단한 TCP 소켓을 열고 접속하고 데이터를 주고 받는 것이지만 당시 처음 접하고 어려움을 겪으며 만들어놓은 것이 시간이 지나 지금에서야 얼마나 값진 것이었는지 알게 되어 성취감이 들었습니다.

배포는 과연 어떻게 할 수 있을까? .. 🤠(열린결말) 

## 링크
[GitHub 링크](https://github.com/PioneerRedwood/GameLauncherWPF)

